<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FitFuel ‚Äî Fuel Your Fitness Journey</title>
    <link rel="icon" type="image/png" href="Fitfuel favicon.png" />

    <style>
      :root {
        --brand: #ff6b35;
        --brand-2: #ff884d;
        --brand-3: #ffcc70;
        --text: #222;
        --text-inv: #fff;
        --glass-light: rgba(255, 255, 255, 0.5);
        --glass-dark: rgba(0, 0, 0, 0.45);
        --card-radius: 16px;
        --shadow-1: 0 8px 24px rgba(0, 0, 0, 0.15);
        --shadow-2: 0 12px 28px rgba(0, 0, 0, 0.22);
      }
      * {
        box-sizing: border-box;
      }
      html,
      body {
        scroll-behavior: smooth;
      }
      body {
        margin: 0;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu,
          Cantarell, Noto Sans, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        min-height: 100vh;
        overflow-x: hidden;
        color: var(--text);
        background: linear-gradient(-45deg, #ffecd2, #fcb69f, #ffdde1, #ee9ca7);
        background-size: 400% 400%;
        animation: gradientMove 16s ease infinite;
      }
      body.dark {
        color: var(--text-inv);
        background: linear-gradient(-45deg, #141e30, #243b55, #0f2027, #2c5364);
        background-size: 400% 400%;
        animation: gradientMove 18s ease infinite;
      }
      @keyframes gradientMove {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      /* Floating Icons */
      .float-icon {
        position: fixed;
        bottom: -120px;
        font-size: 2.4rem;
        opacity: 0.55;
        animation: Global API Helper infinite;
        z-index: 0;
        pointer-events: none; 
        filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.2));
      }
      @keyframes floatUp {
        from {
          transform: translateY(0) scale(1);
          opacity: 0.7;
        }
        to {
          transform: translateY(-120vh) scale(1.2);
          opacity: 0;
        }
      }

      /* Header */
      header {
        position: sticky;
        top: 0;
        z-index: 50;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 14px 20px;
        backdrop-filter: saturate(140%) blur(10px);
        background: linear-gradient(
          to bottom,
          rgba(255, 255, 255, 0.45),
          rgba(255, 255, 255, 0.15)
        );
        border-bottom: 1px solid rgba(255, 255, 255, 0.35);
      }
      body.dark header {
        background: linear-gradient(
          to bottom,
          rgba(0, 0, 0, 0.45),
          rgba(0, 0, 0, 0.2)
        );
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }
      .brand {
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 800;
        letter-spacing: 0.3px;
        font-size: 1.4rem;
        color: #fff;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.25);
      }
      .brand .logo {
        font-size: 1.8rem;
      }

      nav {
        display: flex;
        gap: 12px;
        align-items: center;
      }
      nav a {
        color: #fff;
        text-decoration: none;
        padding: 8px 12px;
        border-radius: 999px;
        font-weight: 600;
        opacity: 0.95;
      }
      nav a:hover {
        background: rgba(255, 255, 255, 0.18);
      }

      .theme-btn,
      .menu-btn {
        background: rgba(255, 255, 255, 0.3);
        border: none;
        border-radius: 12px;
        padding: 8px 10px;
        font-size: 1.2rem;
        cursor: pointer;
        color: #000;
        box-shadow: var(--shadow-1);
      }
      body.dark .theme-btn,
      body.dark .menu-btn {
        background: rgba(0, 0, 0, 0.45);
        color: #fff;
      }

      .menu-btn {
        display: none;
      }
      @media (max-width: 900px) {
        nav {
          position: fixed;
          right: 16px;
          top: 70px;
          display: none;
          flex-direction: column;
          background: var(--glass-light);
          backdrop-filter: blur(8px);
          padding: 12px;
          border-radius: 14px;
          box-shadow: var(--shadow-2);
        }
        body.dark nav {
          background: var(--glass-dark);
        }
        nav.show {
          display: flex;
        }
        .menu-btn {
          display: inline-flex;
        }
      }

      /* Hero */
      .hero {
        text-align: center;
        padding: 90px 20px 70px;
        position: relative;
        z-index: 5;
        color: #fff;
        text-shadow: 0 2px 12px rgba(0, 0, 0, 0.22);
      }
      .hero h1 {
        font-size: clamp(2.2rem, 3.8vw, 3.2rem);
        margin: 0 0 10px;
      }
      .hero p {
        font-size: clamp(1rem, 1.6vw, 1.2rem);
        margin: 0 auto 18px;
        max-width: 820px;
      }
      .cta {
        display: inline-block;
        padding: 14px 28px;
        border-radius: 999px;
        font-weight: 800;
        background: var(--brand);
        color: #fff;
        box-shadow: 0 12px 28px rgba(0, 0, 0, 0.25);
        transition: 0.25s;
      }
      .cta:hover {
        transform: translateY(-2px) scale(1.02);
        background: var(--brand-2);
      }
      .cta.pulse {
        animation: pulse 2.3s infinite;
      }
      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      /* Stats */
      .stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 16px;
        margin: 26px auto 0;
        max-width: 900px;
      }
      .stat {
        background: rgba(255, 255, 255, 0.38);
        backdrop-filter: blur(6px);
        border-radius: 14px;
        padding: 16px;
        box-shadow: var(--shadow-1);
        color: #000;
      }
      body.dark .stat {
        background: rgba(0, 0, 0, 0.38);
        color: #fff;
      }
      .stat h3 {
        margin: 0;
        font-size: 1.8rem;
      }
      .stat p {
        margin: 6px 0 0;
        opacity: 0.9;
      }

      /* Container/Sections */
      .container {
        max-width: 1180px;
        margin: 0 auto;
        padding: 18px;
        position: relative;
        z-index: 5;
      }
      section.block {
        margin: 28px 0 12px;
        padding: 24px;
        border-radius: var(--card-radius);
        background: rgba(255, 255, 255, 0.45);
        backdrop-filter: blur(8px);
        box-shadow: var(--shadow-1);
        color: #000;
      }
      body.dark section.block {
        background: rgba(0, 0, 0, 0.45);
        color: #fff;
      }
      section.block h2 {
        text-align: center;
        margin: 4px 0 8px;
        font-size: clamp(1.6rem, 2.2vw, 2.1rem);
        color: #fff;
        text-shadow: 0 2px 12px rgba(0, 0, 0, 0.3);
      }
      section.block .lead {
        text-align: center;
        margin: 0 auto;
        max-width: 800px;
        opacity: 0.95;
      }

      /* Grid cards */
      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 18px;
        margin-top: 20px;
      }
      .card {
        background: rgba(255, 255, 255, 0.55);
        backdrop-filter: blur(6px);
        padding: 18px;
        border-radius: 14px;
        box-shadow: var(--shadow-1);
        transition: transform 0.25s, box-shadow 0.25s;
        color: #000;
      }
      .card:hover {
        transform: translateY(-6px);
        box-shadow: var(--shadow-2);
      }
      body.dark .card {
        background: rgba(0, 0, 0, 0.55);
        color: #fff;
      }
      .emoji {
        font-size: 1.8rem;
        margin-right: 6px;
      }

      /* Calculator */
      .calc {
        max-width: 560px;
        margin: 18px auto 0;
      }
      label {
        display: block;
        margin-top: 10px;
        font-weight: 700;
      }
      input,
      select {
        width: 100%;
        padding: 10px 12px;
        margin-top: 6px;
        border: none;
        border-radius: 10px;
        outline: none;
      }
      .inline {
        display: flex;
        gap: 8px;
        align-items: center;
      }
      .small {
        width: 100%;
      }
      .btn {
        margin-top: 14px;
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 12px;
        background: var(--brand);
        color: #fff;
        font-weight: 800;
        cursor: pointer;
      }
      .btn:hover {
        background: var(--brand-2);
      }
      .result {
        margin-top: 14px;
        font-weight: 800;
        text-align: center;
      }

      .result-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 12px;
        margin-top: 12px;
      }
      .pill {
        border-radius: 12px;
        padding: 10px 12px;
        background: rgba(255, 255, 255, 0.65);
        color: #000;
      }
      body.dark .pill {
        background: rgba(0, 0, 0, 0.55);
        color: #fff;
      }

      .table-wrap {
        overflow-x: auto;
        margin-top: 14px;
        background: rgba(255, 255, 255, 0.55);
        padding: 10px;
        border-radius: 12px;
        box-shadow: var(--shadow-1);
      }
      body.dark .table-wrap {
        background: rgba(0, 0, 0, 0.55);
      }
      table {
        width: 100%;
        border-collapse: collapse;
      }
      th,
      td {
        padding: 12px 14px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.08);
      }
      body.dark th,
      body.dark td {
        border-bottom-color: rgba(255, 255, 255, 0.15);
      }

      /* Testimonials Carousel */
      .carousel {
        display: grid;
        grid-template-columns: 1fr;
        gap: 12px;
        position: relative;
      }
      .carousel .card {
        min-height: 120px;
      }
      .carousel-dots {
        display: flex;
        justify-content: center;
        gap: 8px;
        margin-top: 8px;
      }
      .dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.7);
        cursor: pointer;
      }
      .dot.active {
        background: var(--brand-3);
      }

      /* FAQ */
      .faq-item {
        background: rgba(255, 255, 255, 0.55);
        padding: 14px 16px;
        border-radius: 12px;
        cursor: pointer;
      }
      body.dark .faq-item {
        background: rgba(0, 0, 0, 0.55);
      }
      .faq-q {
        font-weight: 800;
        display: flex;
        justify-content: space-between;
        gap: 12px;
      }
      .faq-a {
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.35s ease;
        line-height: 1.65;
      }
      .faq-item.open .faq-a {
        max-height: 220px;
      }

      footer {
        text-align: center;
        padding: 24px;
        margin-top: 26px;
        color: #fff;
        text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
      }

      /* Back to top */
      .to-top {
        position: fixed;
        right: 16px;
        bottom: 16px;
        background: var(--brand);
        color: #fff;
        border: none;
        border-radius: 999px;
        padding: 12px 14px;
        cursor: pointer;
        box-shadow: var(--shadow-2);
        display: none;
        z-index: 60;
      }
      .to-top.show {
        display: inline-flex;
      }

      /* Reveal */
      .reveal {
        opacity: 0;
        transform: translateY(16px);
        transition: opacity 0.6s ease, transform 0.6s ease;
      }
      .reveal.visible {
        opacity: 1;
        transform: none;
      }
      
    </style><script src="https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.min.js"></script>

    
  </head>
  <body>
    <!-- Floating Icons -->
    <div class="float-icon" style="left: 8%; animation-duration: 18s">üèã</div>
    <div class="float-icon" style="left: 22%; animation-duration: 24s">ü•ó</div>
    <div class="float-icon" style="left: 40%; animation-duration: 20s">üíß</div>
    <div class="float-icon" style="left: 62%; animation-duration: 26s">üèÉ</div>
    <div class="float-icon" style="left: 80%; animation-duration: 22s">üî•</div>

    <!-- Header -->
    <header>
      <div class="brand"><a href="index.html" style="text-decoration: none; color: inherit;"><span class="logo">üî•</span> FitFuel</a></div>
      <nav id="nav">
        <a href="#calculator">Calculator</a>
        <a href="#why">Why</a>
        <a href="#macros">Macros</a>
        <a href="#tips">Tips</a>
        <a href="#contact">Contact</a>
        <a href="meals.html" target="_self">üçΩÔ∏è Meals</a>
        <a href="workouts.html" target="_self">üí™ Workouts</a>
      </nav>
      <div style="display: flex; gap: 8px; align-items: center">
        <button class="theme-btn" id="themeToggle" title="Toggle theme">
          üåô
        </button>
        <button class="menu-btn" id="menuBtn" title="Menu">‚ò∞</button>
      </div>
    </header>

    <!-- Hero -->
    <section class="hero">
      <h1>Fuel Your Fitness Journey</h1>
      <p>
        Calculate your calories, balance your macros, and hit your goals with an
        aesthetic, super-smooth experience.
      </p>
      <a class="cta pulse" href="#calculator">Start Now</a>

      <div class="stats">
        <div class="stat reveal">
          <h3 id="stat-users">0</h3>
          <p>Happy Users</p>
        </div>
        <div class="stat reveal">
          <h3 id="stat-weight">0</h3>
          <p>KG Lost</p>
        </div>
        <div class="stat reveal">
          <h3 id="stat-workouts">0</h3>
          <p>Workouts Logged</p>
        </div>
        <div class="stat reveal">
          <h3 id="stat-meals">0</h3>
          <p>Meals Tracked</p>
        </div>
      </div>
    </section>

    <div class="container">
      <!-- Rotating Quote -->
      <section class="block reveal" id="quoteBlock">
        <p class="lead" id="quoteText">
          <em>‚ÄúSuccess starts with self-discipline.‚Äù</em>
        </p>
      </section>

      <!-- Calculator -->
      <section class="block reveal" id="calculator">
        <h2>Calorie Calculator</h2>
        <p class="lead">
          Uses the Mifflin‚ÄìSt Jeor equation with activity multipliers. Pick a
          goal to get your target calories and macros.
        </p>

        <div class="calc">
          <div class="grid">
            <div>
              <label>Age</label>
              <input
                type="number"
                id="age"
                placeholder="Years"
                min="10"
                max="100"
                required
              />
            </div>
            <div>
              <label>Gender</label>
              <select id="gender" required>
                <option value="" disabled selected>Select</option>
                <option value="male">Male</option>
                <option value="female">Female</option>
              </select>
            </div>

            <!-- Weight with unit toggle -->
            <div>
              <label>Weight</label>
              <div class="inline">
                <input
                  class="small"
                  type="number"
                  id="weightVal"
                  placeholder="e.g. 70"
                  min="20"
                  max="300"
                  step="0.1"
                  required
                />
                <select id="weightUnit" style="max-width: 110px">
                  <option value="kg" selected>kg</option>
                  <option value="lb">lb</option>
                </select>
              </div>
            </div>

            <!-- Height with unit toggle -->
            <div>
              <label>Height</label>
              <div class="inline" id="heightCmWrap">
                <input
                  class="small"
                  type="number"
                  id="heightCm"
                  placeholder="e.g. 175"
                  min="100"
                  max="250"
                  step="0.1"
                />
                <select id="heightUnit" style="max-width: 110px">
                  <option value="cm" selected>cm</option>
                  <option value="ftin">ft-in</option>
                </select>
              </div>
              <div
                class="inline"
                id="heightFtInWrap"
                style="display: none; margin-top: 8px"
              >
                <input
                  class="small"
                  type="number"
                  id="heightFt"
                  placeholder="ft"
                  min="3"
                  max="8"
                  step="1"
                />
                <input
                  class="small"
                  type="number"
                  id="heightIn"
                  placeholder="in"
                  min="0"
                  max="11"
                  step="1"
                />
              </div>
            </div>

            <div>
              <label>Activity Level</label>
              <select id="activity" required>
                <option value="" disabled selected>Select</option>
                <option value="1.2">Sedentary</option>
                <option value="1.375">Lightly active</option>
                <option value="1.55">Moderately active</option>
                <option value="1.725">Very active</option>
                <option value="1.9">Super active</option>
              </select>
            </div>
            <div>
              <label>Goal</label>
              <select id="goal" required>
                <option value="maintain" selected>Maintain</option>
                <option value="lose">Lose Fat (~15% deficit)</option>
                <option value="gain">Gain Muscle (~12% surplus)</option>
              </select>
            </div>
          </div>
          <button class="btn" id="calcBtn">Calculate</button>
          <div class="result" id="calcResult"></div>
          <div class="result-grid" id="macroGrid" style="display: none">
            <div class="pill" id="pillCalories">Calories: ‚Äî</div>
            <div class="pill" id="pillProtein">Protein: ‚Äî g</div>
            <div class="pill" id="pillCarbs">Carbs: ‚Äî g</div>
            <div class="pill" id="pillFats">Fats: ‚Äî g</div>
          </div>
          <div class="center" style="text-align: center; margin-top: 10px">
            <button class="cta" id="shareBtn" style="display: none">
              Copy Shareable Result Link
            </button>
          </div>
        </div>
      </section>

      <!-- Why -->
      <section class="block reveal" id="why">
        <h2>Why Count Calories?</h2>
        <p class="lead">
          Knowing your intake helps you control your outcome ‚Äî fat loss,
          maintenance, or muscle gain.
        </p>
        <div class="grid">
          <div class="card">
            <span class="emoji">üéØ</span><b>Clear Targets:</b> Daily numbers
            remove guesswork and keep you honest.
          </div>
          <div class="card">
            <span class="emoji">‚öñ</span><b>Balanced Intake:</b> Keep carbs,
            protein, and fats aligned with your training.
          </div>
          <div class="card">
            <span class="emoji">üß†</span><b>Mindful Eating:</b> Portion
            awareness reduces hidden calories.
          </div>
          <div class="card">
            <span class="emoji">üìà</span><b>Measurable Gains:</b> Track, tweak,
            and progress faster.
          </div>
        </div>
      </section>

      <!-- Macros -->
      <section class="block reveal" id="macros">
      <section class="block reveal" id="tips">
        <h2>Nutrition & Training Tips</h2>
        <div class="grid">
          <div class="card">
            <span class="emoji">ü•¶</span><b>Whole Foods:</b> Base meals on
            veggies, fruits, grains.
          </div>
          <div class="card">
            <span class="emoji">üíß</span><b>Hydration:</b> 2‚Äì3 L/day (more if
            training hard).
          </div>
          <div class="card">
            <span class="emoji">üçó</span><b>Protein First:</b> Include protein
            at every meal.
          </div>
          <div class="card">
            <span class="emoji">‚è±</span><b>Consistency:</b> Small wins daily
            beat perfect plans.
          </div>
        </div>
      </section>

      <!-- Workouts -->
      <section class="block reveal" id="workouts">
        <h2>Workout Plans</h2>
        <div class="grid">
          <div class="card">
            <span class="emoji">üèã</span><b>Strength (3x/week):</b> Squat,
            Bench, Deadlift, Rows, OHP.
          </div>
          <div class="card">
            <span class="emoji">üèÉ</span><b>Cardio (2‚Äì3x/week):</b> 20‚Äì40 min
            jog/cycle/HIIT.
          </div>
          <div class="card">
            <span class="emoji">üßò</span><b>Mobility (Daily):</b> 5‚Äì10 min hips,
            shoulders, spine.
          </div>
        </div>
      </section>

      <!-- Testimonials (Carousel) -->
      <section class="block reveal" id="testimonials">
        <h2>What People Say</h2>
        <div class="carousel" id="carousel">
          <div class="card">
            ‚ÄúFitFuel helped me lose 10kg in 3 months. Love the design!‚Äù ‚Äì Rahul
          </div>
          <div class="card" style="display: none">
            ‚ÄúThe calculator is accurate and simple to use.‚Äù ‚Äì Priya
          </div>
          <div class="card" style="display: none">
            ‚ÄúBeautiful website and motivating tips.‚Äù ‚Äì Aman
          </div>
        </div>
        <div class="carousel-dots" id="carouselDots"></div>
      </section>

      <!-- FAQ -->
      <section class="block reveal" id="faq">
        <h2>FAQs</h2>
        <div class="grid">
          <div class="faq-item">
            <div class="faq-q">
              Do I need to count calories forever?<span>Ôºã</span>
            </div>
            <div class="faq-a">
              No. Use it as a tool to learn portions and intake. Once confident,
              you can switch to mindful eating.
            </div>
          </div>
          <div class="faq-item">
            <div class="faq-q">
              How accurate is the calculator?<span>Ôºã</span>
            </div>
            <div class="faq-a">
              It uses the Mifflin‚ÄìSt Jeor equation with activity multipliers.
              Track progress and adjust by 100‚Äì200 kcal.
            </div>
          </div>
          <div class="faq-item">
            <div class="faq-q">
              Can I gain muscle and lose fat together?<span>Ôºã</span>
            </div>
            <div class="faq-a">
              Beginners can. Focus on protein, progressive overload, sleep, and
              a small surplus/deficit.
            </div>
          </div>
        </div>
      </section>

      <!-- Contact + Subscribe -->
      <section class="block reveal" id="contact">
        <h2>Stay Connected</h2>
        <p class="lead">Subscribe for weekly tips & updates.</p>
        <div class="grid" style="align-items: start">
          <div class="card">
            <form
              id="subscribeForm"
              onsubmit="event.preventDefault(); alert('Thanks for subscribing to FitFuel!'); this.reset();"
            >
              <label>Email</label>
              <input type="email" placeholder="Enter your email" required />
              <button class="btn" type="submit">Subscribe</button>
            </form>
          </div>
          <div class="card">
            <form
              id="contactForm"
              onsubmit="event.preventDefault(); alert('Message sent! We will get back soon.'); this.reset();"
            >
              <label>Your Name</label>
              <input type="text" placeholder="Name" required />
              <label>Your Email</label>
              <input type="email" placeholder="Email" required />
              <label>Message</label>
              <textarea
                rows="4"
                placeholder="Type your message"
                style="
                  width: 100%;
                  padding: 10px;
                  border-radius: 10px;
                  border: none;
                  resize: vertical;
                "
              ></textarea>
              <button class="btn" type="submit">Send Message</button>
            </form>
          </div>
        </div>
      </section>
    </div>
    <div id="threeContainer" style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:0;"></div>


    <footer>&copy; 2025 FitFuel. All rights reserved.</footer>

    <button id="toTop" class="to-top" title="Back to top">‚Üë</button>

    <script>
      // ======= Theme Toggle with Persistence =======
      const themeBtn = document.getElementById("themeToggle");
      const userPref = localStorage.getItem("fitfuel-theme");
      if (userPref === "dark") document.body.classList.add("dark");
      themeBtn.textContent = document.body.classList.contains("dark")
        ? "‚òÄ"
        : "üåô";
      themeBtn.addEventListener("click", () => {
        document.body.classList.toggle("dark");
        localStorage.setItem(
          "fitfuel-theme",
          document.body.classList.contains("dark") ? "dark" : "light"
        );
        themeBtn.textContent = document.body.classList.contains("dark")
          ? "‚òÄ"
          : "üåô";
      });

      // ======= Mobile Menu =======
      const menuBtn = document.getElementById("menuBtn");
      const nav = document.getElementById("nav");
      menuBtn.addEventListener("click", () => nav.classList.toggle("show"));
      nav
        .querySelectorAll("a")
        .forEach((a) =>
          a.addEventListener("click", () => nav.classList.remove("show"))
        );

      // ======= Stats Counters =======
      function animateCount(el, to, dur = 1500) {
        const start = 0;
        const t0 = performance.now();
        function step(t) {
          const p = Math.min(1, (t - t0) / dur);
          el.textContent = Math.floor(start + (to - start) * p).toLocaleString();
          if (p < 1) requestAnimationFrame(step);
        }
        requestAnimationFrame(step);
      }
      const counters = [
        { id: "stat-users", to: 12500 },
        { id: "stat-weight", to: 8420 },
        { id: "stat-workouts", to: 39400 },
        { id: "stat-meals", to: 120300 },
      ];
      window.addEventListener("load", () =>
        counters.forEach((c) =>
          animateCount(document.getElementById(c.id), c.to)
        )
      );

      // ======= Rotating Quotes =======
      const quotes = [
        "Push harder than yesterday if you want a different tomorrow.",
        "Your body can stand almost anything. It‚Äôs your mind you have to convince.",
        "Success starts with self-discipline.",
        "Don‚Äôt limit your challenges. Challenge your limits.",
        "Eat for the body you want, not for the body you have.",
      ];
      let qi = 0;
      const quoteEl = document.getElementById("quoteText");
      setInterval(() => {
        qi = (qi + 1) % quotes.length;
        // use safe textContent but keep the emphasis around it
        quoteEl.innerHTML = `<em>‚Äú${quotes[qi]}‚Äù</em>`;
      }, 4200);

      // ======= Calculator (Mifflin‚ÄìSt Jeor) + Goal =======
      function calcBMR({ age, weightKg, heightCm, gender }) {
        // weight kg, height cm
        if (gender === "male")
          return 10 * weightKg + 6.25 * heightCm - 5 * age + 5;
        return 10 * weightKg + 6.25 * heightCm - 5 * age - 161;
      }

      // ---- Unit helpers ----
      const KG_PER_LB = 0.45359237;
      const CM_PER_IN = 2.54;

      function toKg(val, unit) {
        return unit === "lb" ? val * KG_PER_LB : val;
      }
      function ftInToCm(ft, inch) {
        const totalIn = (ft || 0) * 12 + (inch || 0);
        return totalIn * CM_PER_IN;
      }
      function cmToFtIn(cm) {
        const totalIn = cm / CM_PER_IN;
        const ft = Math.floor(totalIn / 12);
        const inch = Math.round(totalIn - ft * 12);
        return { ft, inch };
      }

      // ---- DOM refs ----
      const calcBtn = document.getElementById("calcBtn");
      const res = document.getElementById("calcResult");
      const grid = document.getElementById("macroGrid");
      const pillC = document.getElementById("pillCalories");
      const pillP = document.getElementById("pillProtein");
      const pillCarb = document.getElementById("pillCarbs");
      const pillFat = document.getElementById("pillFats");
      const shareBtn = document.getElementById("shareBtn");

      const weightVal = document.getElementById("weightVal");
      const weightUnit = document.getElementById("weightUnit");

      const heightUnit = document.getElementById("heightUnit");
      const heightCm = document.getElementById("heightCm");
      const heightFt = document.getElementById("heightFt");
      const heightIn = document.getElementById("heightIn");
      const heightCmWrap = document.getElementById("heightCmWrap");
      const heightFtInWrap = document.getElementById("heightFtInWrap");

      heightUnit.addEventListener("change", () => {
        const u = heightUnit.value;
        if (u === "cm") {
          heightFtInWrap.style.display = "none";
          heightCmWrap.style.display = "flex";
        } else {
          // Convert cm to ft/in if value exists
          if (heightCm.value) {
            const { ft, inch } = cmToFtIn(parseFloat(heightCm.value));
            heightFt.value = ft;
            heightIn.value = inch;
          }
          heightCmWrap.style.display = "none";
          heightFtInWrap.style.display = "flex";
        }
      });

      function macrosFromCalories(calories, weightKg) {
        // keep protein multiplier sensible (original code used 2.0)
        const proteinMultiplier = 2.0;
        const proteinG = Math.round(proteinMultiplier * weightKg);
        const fatKcal = Math.round(calories * 0.25);
        const fatG = Math.round(fatKcal / 9);
        const proteinKcal = proteinG * 4;
        const carbsKcal = Math.max(0, calories - proteinKcal - fatKcal);
        const carbsG = Math.round(carbsKcal / 4);
        return { proteinG, carbsG, fatG };
      }

      function animateNumber(el, target) {
        const start = 0;
        const dur = 900;
        const t0 = performance.now();
        function step(t) {
          const p = Math.min(1, (t - t0) / dur);
          el.textContent = Math.round(start + (target - start) * p).toLocaleString();
          if (p < 1) requestAnimationFrame(step);
        }
        requestAnimationFrame(step);
      }

      function compute() {
        const age = parseInt(document.getElementById("age").value);
        const gender = document.getElementById("gender").value;
        const activity = parseFloat(document.getElementById("activity").value);
        const goal = document.getElementById("goal").value;

        // weight
        const wVal = parseFloat(weightVal.value);
        const wUnit = weightUnit.value; // 'kg' | 'lb'

        // height (depending on unit)
        const hUnit = heightUnit.value; // 'cm' | 'ftin'
        let heightCmVal;
        if (hUnit === "cm") {
          heightCmVal = parseFloat(heightCm.value);
        } else {
          heightCmVal = ftInToCm(
            parseFloat(heightFt.value || 0),
            parseFloat(heightIn.value || 0)
          );
        }

        if (!age || !wVal || !heightCmVal || !gender || !activity) {
          res.textContent = "‚ö† Please fill all fields.";
          grid.style.display = "none";
          shareBtn.style.display = "none";
          return;
        }

        const weightKg = toKg(wVal, wUnit);
        const bmr = calcBMR({ age, weightKg, heightCm: heightCmVal, gender });
        let tdee = bmr * activity;
        if (goal === "lose") tdee *= 0.85; // 15% deficit
        if (goal === "gain") tdee *= 1.12; // 12% surplus
        const calories = Math.round(tdee);

        // Macros
        const { proteinG, carbsG, fatG } = macrosFromCalories(
          calories,
          weightKg
        );

        // Render (use template strings)
        res.innerHTML = `Your daily target: <span style="font-weight:900;">${calories.toLocaleString()} kcal</span>`;
        grid.style.display = "grid";
        pillC.textContent = `Calories: ${calories.toLocaleString()}`;
        pillP.textContent = `Protein: ${proteinG} g`;
        pillCarb.textContent = `Carbs: ${carbsG} g`;
        pillFat.textContent = `Fats: ${fatG} g`;

        // Animate numbers for fun
        animateNumber(document.getElementById("stat-users"), 12500);
        animateNumber(document.getElementById("stat-weight"), 8420);

        // Store BMR data in localStorage for meals page
        const bmrData = {
          age,
          gender,
          activity,
          goal,
          calories,
          weightKg: Math.round(weightKg * 10) / 10,
          heightCm: Math.round(heightCmVal * 10) / 10,
          bmr: Math.round(bmr),
          tdee: Math.round(tdee),
          proteinG,
          carbsG,
          fatG,
          timestamp: Date.now()
        };
        localStorage.setItem('fitfuel_bmr_data', JSON.stringify(bmrData));

        // Build share link with query params (keep backward fields in metric for compatibility)
        const params = new URLSearchParams({
          age,
          gender,
          activity,
          goal,
          calories,
          // Legacy fields (metric)
          weight: Math.round(weightKg * 10) / 10,
          height: Math.round(heightCmVal * 10) / 10,
          // Unit-aware fields
          wunit: wUnit,
          hunit: hUnit,
          wval: wVal,
          ft: hUnit === "ftin" ? (heightFt.value || "") : "",
          inch: hUnit === "ftin" ? (heightIn.value || "") : "",
        });

        const link =
          location.origin + location.pathname + "?" + params.toString();
        shareBtn.style.display = "inline-block";
        shareBtn.dataset.link = link;
        // ensure the visible share button text is the expected default
        shareBtn.textContent = "Copy Shareable Result Link";
      }

      calcBtn.addEventListener("click", compute);

      // ======= Share Button =======
      shareBtn.addEventListener("click", async () => {
        const link = shareBtn.dataset.link || (location.origin + location.pathname);
        const text = `üî• FitFuel Result üî•\n${pillC.textContent}\n${pillP.textContent}\n${pillCarb.textContent}\n${pillFat.textContent}\n\nüëâ Your personalized link: ${link}`;

        if (navigator.share) {
          // üì± Mobile devices
          try {
            await navigator.share({
              title: "FitFuel Results",
              text: text,
              url: link,
            });
          } catch (err) {
            console.log("Share cancelled", err);
          }
        } else {
          // üíª PC fallback: Copy to clipboard
          try {
            await navigator.clipboard.writeText(text);
            const prev = shareBtn.textContent;
            shareBtn.textContent = "‚úÖ Result Copied!";
            setTimeout(() => (shareBtn.textContent = prev), 2000);
          } catch (err) {
            alert("Copy failed. Link: " + link);
          }
        }
      });

      // ======= Prefill from Query Params =======
      (function prefill() {
        const q = new URLSearchParams(location.search);

        const age = q.get("age");
        if (age) document.getElementById("age").value = age;
        const gender = q.get("gender");
        if (gender) document.getElementById("gender").value = gender;
        const activity = q.get("activity");
        if (activity) document.getElementById("activity").value = activity;
        const goal = q.get("goal");
        if (goal) document.getElementById("goal").value = goal;

        const wval = q.get("wval") || q.get("weight");
        const wunit = q.get("wunit");
        if (wval) weightVal.value = wval;
        if (wunit) weightUnit.value = wunit;

        const hunit = q.get("hunit");
        if (hunit === "ftin") {
          heightUnit.value = "ftin";
          heightUnit.dispatchEvent(new Event("change"));
          if (q.get("ft")) heightFt.value = q.get("ft");
          if (q.get("inch")) heightIn.value = q.get("inch");
        } else if (q.get("height")) {
          heightUnit.value = "cm";
          heightCm.value = q.get("height");
        }

        if (
          age &&
          gender &&
          activity &&
          (wval || q.get("weight")) &&
          (q.get("height") || q.get("ft"))
        ) {
          compute();
          window.scrollTo({
            top: document.getElementById("calculator").offsetTop - 60,
            behavior: "smooth",
          });
        }
      })();

      // ======= Carousel =======
      const carousel = document.getElementById("carousel");
      const slides = carousel.querySelectorAll(".card");
      const dotsWrap = document.getElementById("carouselDots");
      let ci = 0;
      slides.forEach((_, i) => {
        const d = document.createElement("div");
        d.className = "dot" + (i === 0 ? " active" : "");
        d.addEventListener("click", () => showSlide(i));
        dotsWrap.appendChild(d);
      });
      const dots = dotsWrap.querySelectorAll(".dot");
      function showSlide(i) {
        slides[ci].style.display = "none";
        dots[ci].classList.remove("active");
        ci = i;
        slides[ci].style.display = "block";
        dots[ci].classList.add("active");
      }
      setInterval(() => showSlide((ci + 1) % slides.length), 4500);

      // ======= FAQ =======
      document.querySelectorAll(".faq-item").forEach((item) => {
        item.addEventListener("click", () => item.classList.toggle("open"));
      });

      // ======= Scroll Reveal =======
      const revealEls = document.querySelectorAll(".reveal");
      function checkReveal() {
        const wh = window.innerHeight;
        revealEls.forEach((el) => {
          const rect = el.getBoundingClientRect();
          if (rect.top < wh - 60) el.classList.add("visible");
        });
      }
      window.addEventListener("scroll", checkReveal);
      window.addEventListener("load", checkReveal);

      // ======= Back to Top =======
      const toTop = document.getElementById("toTop");
      window.addEventListener("scroll", () => {
        if (window.scrollY > 400) toTop.classList.add("show");
        else toTop.classList.remove("show");
      });
      toTop.addEventListener("click", () =>
        window.scrollTo({ top: 0, behavior: "smooth" })
      );
    </script>
    <script>
      // <![CDATA[  <-- For SVG support
      if ("WebSocket" in window) {
        (function () {
          function refreshCSS() {
            var sheets = [].slice.call(document.getElementsByTagName("link"));
            var head = document.getElementsByTagName("head")[0];
            for (var i = 0; i < sheets.length; ++i) {
              var elem = sheets[i];
              var parent = elem.parentElement || head;
              parent.removeChild(elem);
              var rel = elem.rel;
              if (
                (elem.href && typeof rel != "string") ||
                rel.length == 0 ||
                rel.toLowerCase() == "stylesheet"
              ) {
                var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, "");
                elem.href =
                  url +
                  (url.indexOf("?") >= 0 ? "&" : "?") +
                  "_cacheOverride=" +
                  new Date().valueOf();
              }
              parent.appendChild(elem);
            }
          }
          var protocol =
            window.location.protocol === "http:" ? "ws://" : "wss://";
          var address =
            protocol + window.location.host + window.location.pathname + "/ws";
          var socket = new WebSocket(address);
          socket.onmessage = function (msg) {
            if (msg.data == "reload") window.location.reload();
            else if (msg.data == "refreshcss") refreshCSS();
          };
          if (
            sessionStorage &&
            !sessionStorage.getItem("IsThisFirstTime_Log_From_LiveServer")
          ) {
            console.log("Live reload enabled.");
            sessionStorage.setItem("IsThisFirstTime_Log_From_LiveServer", true);
          }
        })();
      } else {
        console.error(
          "Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading."
        );
      }
      // Enhanced 3D Scene with Multiple Floating Objects
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.z = 15;

const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setClearColor(0x000000, 0); // Transparent background
document.getElementById("threeContainer").appendChild(renderer.domElement);

// Enhanced Lighting
const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
scene.add(ambientLight);

const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
directionalLight.position.set(10, 10, 5);
scene.add(directionalLight);

const pointLight = new THREE.PointLight(0xff6b35, 1, 100);
pointLight.position.set(0, 0, 10);
scene.add(pointLight);

// Create multiple floating 3D fitness-themed objects
const objects = [];

// Dumbbell-like shapes
for(let i = 0; i < 8; i++) {
  const geometry = new THREE.CylinderGeometry(0.3, 0.3, 2, 8);
  const material = new THREE.MeshStandardMaterial({ 
    color: new THREE.Color().setHSL(Math.random(), 0.7, 0.6),
    metalness: 0.3,
    roughness: 0.4
  });
  const cylinder = new THREE.Mesh(geometry, material);
  
  // Random positions
  cylinder.position.x = (Math.random() - 0.5) * 30;
  cylinder.position.y = (Math.random() - 0.5) * 20;
  cylinder.position.z = (Math.random() - 0.5) * 20;
  
  // Random rotations
  cylinder.rotation.x = Math.random() * Math.PI;
  cylinder.rotation.y = Math.random() * Math.PI;
  cylinder.rotation.z = Math.random() * Math.PI;
  
  scene.add(cylinder);
  objects.push({
    mesh: cylinder,
    rotationSpeed: {
      x: (Math.random() - 0.5) * 0.02,
      y: (Math.random() - 0.5) * 0.02,
      z: (Math.random() - 0.5) * 0.02
    },
    floatSpeed: Math.random() * 0.02 + 0.01
  });
}

// Add some geometric shapes for variety
for(let i = 0; i < 6; i++) {
  const geometries = [
    new THREE.BoxGeometry(1, 1, 1),
    new THREE.SphereGeometry(0.7, 16, 16),
    new THREE.OctahedronGeometry(0.8)
  ];
  
  const geometry = geometries[Math.floor(Math.random() * geometries.length)];
  const material = new THREE.MeshStandardMaterial({ 
    color: new THREE.Color().setHSL(0.1 + Math.random() * 0.1, 0.8, 0.6),
    metalness: 0.5,
    roughness: 0.2
  });
  const shape = new THREE.Mesh(geometry, material);
  
  shape.position.x = (Math.random() - 0.5) * 25;
  shape.position.y = (Math.random() - 0.5) * 15;
  shape.position.z = (Math.random() - 0.5) * 15;
  
  scene.add(shape);
  objects.push({
    mesh: shape,
    rotationSpeed: {
      x: (Math.random() - 0.5) * 0.03,
      y: (Math.random() - 0.5) * 0.03,
      z: (Math.random() - 0.5) * 0.03
    },
    floatSpeed: Math.random() * 0.015 + 0.008
  });
}

// Mouse interaction
let mouseX = 0, mouseY = 0;
let targetRotationX = 0, targetRotationY = 0;

document.addEventListener('mousemove', (event) => {
  mouseX = (event.clientX / window.innerWidth) * 2 - 1;
  mouseY = -(event.clientY / window.innerHeight) * 2 + 1;
  
  targetRotationX = mouseY * 0.1;
  targetRotationY = mouseX * 0.1;
});

// Enhanced Animation
function animate() {
  requestAnimationFrame(animate);
  
  const time = Date.now() * 0.001;
  
  // Animate all objects
  objects.forEach((obj, index) => {
    // Rotation
    obj.mesh.rotation.x += obj.rotationSpeed.x;
    obj.mesh.rotation.y += obj.rotationSpeed.y;
    obj.mesh.rotation.z += obj.rotationSpeed.z;
    
    // Floating motion
    obj.mesh.position.y += Math.sin(time * obj.floatSpeed + index) * 0.02;
    
    // Gentle drift
    obj.mesh.position.x += Math.sin(time * 0.3 + index) * 0.005;
    obj.mesh.position.z += Math.cos(time * 0.2 + index) * 0.005;
  });
  
  // Camera movement based on mouse
  camera.rotation.x += (targetRotationX - camera.rotation.x) * 0.05;
  camera.rotation.y += (targetRotationY - camera.rotation.y) * 0.05;
  
  // Gentle camera floating
  camera.position.y = Math.sin(time * 0.5) * 2;
  camera.position.x = Math.cos(time * 0.3) * 1;
  
  renderer.render(scene, camera);
}
animate();

// Handle resize
window.addEventListener('resize', () => {
  camera.aspect = window.innerWidth / window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
      // ]]>
    </script>
  </body>
</html>